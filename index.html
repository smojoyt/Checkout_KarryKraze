<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Karry Kraze - Checkout</title>

    <!-- Snipcart CSS -->
    <link rel="stylesheet" href="https://cdn.snipcart.com/themes/v3.0.31/default/snipcart.css" />

    <!-- Snipcart Script -->
    <script async src="https://cdn.snipcart.com/themes/v3.0.31/default/snipcart.js"></script>

    <!-- Snipcart API Key (replace YOUR_API_KEY_HERE with your actual key) -->
    <div hidden id="snipcart" data-api-key="OTkwZGJhM2QtNmQyMy00ZGYxLTg4YzAtNmExNDA2MDhmNmU0NjM4NzgwMjMxMTgyOTYyMjAz
"></div>

    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            font-family: Arial, sans-serif;
            overflow: hidden;
        }

        .background-video {
            position: fixed;
            right: 0;
            bottom: 0;
            min-width: 100%;
            min-height: 100%;
            z-index: -1;
            object-fit: cover;
        }

        .content {
            position: relative;
            z-index: 1;
            text-align: center;
            padding: 50px;
            color: white;
        }

        .message {
            font-size: 18px;
        }

        .logo {
            max-width: 150px;
            margin-bottom: 20px;
        }

        .snipcart-add-item {
            display: none; /* Hide the actual cart button */
        }

        footer {
            text-align:center;
            margin-top: 50px;
            font-size: 14px;
            color: white;
        }
    </style>
</head>
<body>

    <!-- Background Video -->
    <video autoplay muted loop class="background-video">
        <source src="/images/Background/BagPreview_06.mp4" type="video/mp4">
        Your browser does not support the video tag.
    </video>

    <div class="content">
        <!-- Optional Logo -->
        <img class="logo" src="/images/Logo/LL_White_01.png" alt="Karry Kraze Logo">

        <!-- Message Displayed to Customer -->
        <div class="message">
            Loading your cart...<br>
            If nothing happens, <a href="#" onclick="retryAdd()" style="color: #fff; text-decoration: underline;">click here</a>.
        </div>
    </div>

    <!-- Dynamic Snipcart Button Generator -->
    <script>const products = {
      "Headwear_EarflapBeanie": {
        price: "49.97",
        url: "https://www.karrykraze.com/products/headwear/RibbedKnitEarflapBeanie",
        description: "Ribbed Knit Acrylic Blend\nOversized earflap design\nSignature “LOVER BOY” front patch\nOne size fits most\nLightweight & breathable\nColor: Jet Black | Apricrot\nHand wash cold, dry flat",
        image: "https://www.karrykraze.com/imgs/Products/Hats/BunnyEarsRat/01_03.png",
        name: "Ribbed Knit Earflap Beanie",
        custom1Name: "Color",
        custom1Options: "Black | Apricrot"
      }
    };

    function addToCart(sku) {
  const p = products[sku];
  if (!p) return;

  const btn = document.createElement("button");
  btn.className = "snipcart-add-item";
  btn.style.display = "none";
  btn.setAttribute("data-item-id", sku);
  btn.setAttribute("data-item-price", p.price);
  btn.setAttribute("data-item-url", p.url);
  btn.setAttribute("data-item-description", p.description);
  btn.setAttribute("data-item-image", p.image);
  btn.setAttribute("data-item-name", p.name);
  if (p.custom1Name) {
    btn.setAttribute("data-item-custom1-name", p.custom1Name);
    btn.setAttribute("data-item-custom1-options", p.custom1Options);
  }

  document.body.appendChild(btn);
  btn.click();

  setTimeout(() => {
    Snipcart.api.theme.cart.open();
  }, 1000);
}


    document.addEventListener("snipcart.ready", () => {
      const params = new URLSearchParams(window.location.search);
      const sku = params.get("autocart");
      if (sku) {
        addToCart(sku);
      }
    });

    function retryAdd() {
      const params = new URLSearchParams(window.location.search);
      const sku = params.get("autocart");
      if (sku) {
        addToCart(sku);
      }
    }</script>




    <!-- Snipcart Cart will auto-pop -->
    <footer>
        &copy; Karry Kraze. All rights reserved.
    </footer>

</body>
</html>
